---
    name: Code Coverage
    
    on:
      pull_request:
      push:
    
    jobs:
      coverage:
        name: Calculate code coverage
        runs-on: windows-latest
    
        steps:
          - name: Checkout Code
            uses: actions/checkout@v3

          - name: Set up Python
            uses: actions/setup-python@v4
            with:
              python-version: '3.12'
         
          - name: Install dependencies
            run: |
              python -m pip install --upgrade pip
              pip install -r requirements.txt
          
          - name: Run tests using coverage.py module
            run: |
              coverage run -m unittest
          
          - name: Generate xml report
            run: | 
              coverage xml
    
          - name: Code Coverage Report
            uses: irongut/CodeCoverageSummary@v1.3.0
            with:
              filename: coverage.xml
              badge: true
              fail_below_min: true
              format: markdown
              hide_branch_rate: false
              hide_complexity: true
              indicators: true
              output: both
              thresholds: '60 80'